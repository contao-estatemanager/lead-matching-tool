var LeadMatching;(()=>{var t={957:function(t){var e;e=function(){"use strict";function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function e(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a=function(t){return"string"==typeof t?document.querySelector(t):t()},c=function(t,e){var n="string"==typeof t?document.createElement(t):t;for(var r in e){var o=e[r];if("inside"===r)o.append(n);else if("dest"===r)a(o[0]).insertAdjacentElement(o[1],n);else if("around"===r){var i=o;i.parentNode.insertBefore(n,i),n.append(i),null!=i.getAttribute("autofocus")&&i.focus()}else r in n?n[r]=o:n.setAttribute(r,o)}return n},u=function(t,e){return t=t.toString().toLowerCase(),e?t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):t},l=function(t,n){return c("mark",e({innerHTML:t},"string"==typeof n&&{class:n})).outerHTML},f=function(t,e){e.input.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e.feedback,cancelable:!0}))},p=function(t,e,n){var r=n||{},o=r.mode,i=r.diacritics,s=r.highlight,a=u(e,i);if(e=e.toString(),t=u(t,i),"loose"===o){var c=(t=t.replace(/ /g,"")).length,f=0,p=Array.from(e).map((function(e,n){return f<c&&a[n]===t[f]&&(e=s?l(e,s):e,f++),e})).join("");if(f===c)return p}else{var d=a.indexOf(t);if(~d)return t=e.substring(d,d+t.length),s?e.replace(t,l(t,s)):e}},d=function(t,e){return new Promise((function(n,r){var o;return(o=t.data).cache&&o.store?n():new Promise((function(t,n){return"function"==typeof o.src?o.src(e).then(t,n):t(o.src)})).then((function(e){try{return t.feedback=o.store=e,f("response",t),n()}catch(t){return r(t)}}),r)}))},h=function(t,e){var n=e.data,r=e.searchEngine,o=[];n.store.forEach((function(s,a){var c=function(n){var i=n?s[n]:s,a="function"==typeof r?r(t,i):p(t,i,{mode:r,diacritics:e.diacritics,highlight:e.resultItem.highlight});if(a){var c={match:a,value:s};n&&(c.key=n),o.push(c)}};if(n.keys){var u,l=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw s}}}}(n.keys);try{for(l.s();!(u=l.n()).done;)c(u.value)}catch(t){l.e(t)}finally{l.f()}}else c()})),n.filter&&(o=n.filter(o));var s=o.slice(0,e.resultsList.maxResults);e.feedback={query:t,matches:o,results:s},f("results",e)},m="aria-expanded",v="aria-activedescendant",y="aria-selected",b=function(t,n){t.feedback.selection=e({index:n},t.feedback.results[n])},g=function(t){t.isOpen||((t.wrapper||t.input).setAttribute(m,!0),t.list.removeAttribute("hidden"),t.isOpen=!0,f("open",t))},w=function(t){t.isOpen&&((t.wrapper||t.input).setAttribute(m,!1),t.input.setAttribute(v,""),t.list.setAttribute("hidden",""),t.isOpen=!1,f("close",t))},S=function(t,e){var n=e.resultItem,r=e.list.getElementsByTagName(n.tag),i=!!n.selected&&n.selected.split(" ");if(e.isOpen&&r.length){var s,a,c=e.cursor;t>=r.length&&(t=0),t<0&&(t=r.length-1),e.cursor=t,c>-1&&(r[c].removeAttribute(y),i&&(a=r[c].classList).remove.apply(a,o(i))),r[t].setAttribute(y,!0),i&&(s=r[t].classList).add.apply(s,o(i)),e.input.setAttribute(v,r[e.cursor].id),e.list.scrollTop=r[t].offsetTop-e.list.clientHeight+r[t].clientHeight+5,e.feedback.cursor=e.cursor,b(e,t),f("navigate",e)}},O=function(t){S(t.cursor+1,t)},L=function(t){S(t.cursor-1,t)},j=function(t,e,n){(n=n>=0?n:t.cursor)<0||(t.feedback.event=e,b(t,n),f("selection",t),w(t))};function x(t,n){var r=this;return new Promise((function(o,i){var s,a;return s=n||((a=t.input)instanceof HTMLInputElement||a instanceof HTMLTextAreaElement?a.value:a.innerHTML),function(t,e,n){return e?e(t):t.length>=n}(s=t.query?t.query(s):s,t.trigger,t.threshold)?d(t,s).then((function(n){try{return t.feedback instanceof Error?o():(h(s,t),t.resultsList&&function(t){var n=t.resultsList,r=t.list,o=t.resultItem,i=t.feedback,s=i.matches,a=i.results;if(t.cursor=-1,r.innerHTML="",s.length||n.noResults){var u=new DocumentFragment;a.forEach((function(t,n){var r=c(o.tag,e({id:"".concat(o.id,"_").concat(n),role:"option",innerHTML:t.match,inside:u},o.class&&{class:o.class}));o.element&&o.element(r,t)})),r.append(u),n.element&&n.element(r,i),g(t)}else w(t)}(t),u.call(r))}catch(t){return i(t)}}),i):(w(t),u.call(r));function u(){return o()}}))}var A=function(t,e){for(var n in t)for(var r in t[n])e(n,r)};function k(t){var n=this;return new Promise((function(r,o){var i,s,a;if(i=t.placeHolder,a={role:"combobox","aria-owns":(s=t.resultsList).id,"aria-haspopup":!0,"aria-expanded":!1},c(t.input,e(e({"aria-controls":s.id,"aria-autocomplete":"both"},i&&{placeholder:i}),!t.wrapper&&e({},a))),t.wrapper&&(t.wrapper=c("div",e({around:t.input,class:t.name+"_wrapper"},a))),s&&(t.list=c(s.tag,e({dest:[s.destination,s.position],id:s.id,role:"listbox",hidden:"hidden"},s.class&&{class:s.class}))),function(t){var n,r,o,i=t.events,s=(n=function(){return x(t)},r=t.debounce,function(){clearTimeout(o),o=setTimeout((function(){return n()}),r)}),a=t.events=e({input:e({},i&&i.input)},t.resultsList&&{list:i?e({},i.list):{}}),c={input:{input:function(){s()},keydown:function(e){!function(t,e){switch(t.keyCode){case 40:case 38:t.preventDefault(),40===t.keyCode?O(e):L(e);break;case 13:e.submit||t.preventDefault(),e.cursor>=0&&j(e,t);break;case 9:e.resultsList.tabSelect&&e.cursor>=0&&j(e,t);break;case 27:e.input.value="",w(e)}}(e,t)},blur:function(){w(t)}},list:{mousedown:function(t){t.preventDefault()},click:function(e){!function(t,e){var n=e.resultItem.tag.toUpperCase(),r=Array.from(e.list.querySelectorAll(n)),o=t.target.closest(n);o&&o.nodeName===n&&j(e,t,r.indexOf(o))}(e,t)}}};A(c,(function(e,n){(t.resultsList||"input"===n)&&(a[e][n]||(a[e][n]=c[e][n]))})),A(a,(function(e,n){t[e].addEventListener(n,a[e][n])}))}(t),t.data.cache)return d(t).then((function(t){try{return u.call(n)}catch(t){return o(t)}}),o);function u(){return f("init",t),r()}return u.call(n)}))}function P(t){var e=t.prototype;e.init=function(){k(this)},e.start=function(t){x(this,t)},e.unInit=function(){if(this.wrapper){var t=this.wrapper.parentNode;t.insertBefore(this.input,this.wrapper),t.removeChild(this.wrapper)}var e;A((e=this).events,(function(t,n){e[t].removeEventListener(n,e.events[t][n])}))},e.open=function(){g(this)},e.close=function(){w(this)},e.goTo=function(t){S(t,this)},e.next=function(){O(this)},e.previous=function(){L(this)},e.select=function(t){j(this,null,t)},e.search=function(t,e,n){return p(t,e,n)}}return function t(e){this.options=e,this.id=t.instances=(t.instances||0)+1,this.name="autoComplete",this.wrapper=1,this.threshold=1,this.debounce=0,this.resultsList={position:"afterend",tag:"ul",maxResults:5},this.resultItem={tag:"li"},function(t){var e=t.name,r=t.options,o=t.resultsList,i=t.resultItem;for(var s in r)if("object"===n(r[s]))for(var c in t[s]||(t[s]={}),r[s])t[s][c]=r[s][c];else t[s]=r[s];t.selector=t.selector||"#"+e,o.destination=o.destination||t.selector,o.id=o.id||e+"_list_"+t.id,i.id=i.id||e+"_result",t.input=a(t.selector)}(this),P.call(this,t),k(this)}},t.exports=e()},747:(t,e,n)=>{"use strict";function r(){var t={},e=!1,n=0,o=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],n++);for(var i=function(n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e&&"[object Object]"===Object.prototype.toString.call(n[o])?t[o]=r(!0,t[o],n[o]):t[o]=n[o])};n<o;n++){var s=arguments[n];i(s)}return t}n.r(e),n.d(e,{LeadMatching:()=>s});var o=n(957),i=n.n(o);class s{constructor(t){this.options=r(!0,{form:".hasteform_estate > form",configId:null,proximitySearch:{active:!1,placeholder:"Regionen",selector:'[name="regions"]',sourceUrl:"",source:"regions"},countLive:{active:!0,sourceUrl:"",route:"/leadmatching/count",selector:"[data-counter]",format:t=>t}},t||{}),this.form=document.querySelector(this.options.form),this.options.countLive?.active&&this._initLiveCounting(),this.options.proximitySearch?.active&&this._initProximitySearch()}_initLiveCounting(){this.domCounter=document.querySelectorAll(this.options.countLive.selector),this.domState=[];for(const t of this.form.elements){let e="blur";switch(t.tagName.toLowerCase()){case"select":e="change";break;case"button":continue}this.domState[t.name]=t.value,t.addEventListener(e,(t=>this._count(t)))}}_count(t){const e=t.target;if(this.domState[e.name]===e.value)return;this.domState[e.name]=e.value;const n=this.options.countLive.sourceUrl+this.options.countLive.route+"/"+this.options.configId,r=new FormData(this.form);fetch(n,{method:"POST",body:r}).then((t=>t.json())).then((t=>{for(const e of this.domCounter)e.innerText=this.options.countLive.format(t.count)}))}_initProximitySearch(){const t=this.options.proximitySearch,e=document.querySelector(t.selector);e.type="search",e.spellcheck=!1,e.autocorrect="off",e.autocomplete="off",e.autocapitalize="off","regions"===t.source&&(t.source=this._getSystemRegionSource()),this.autocomplete=new(i())({selector:t.selector,wrapper:!1,placeHolder:t.placeholder,data:t.source,resultsList:{element:(t,e)=>{if(!e.results.length){const n=document.createElement("div");n.setAttribute("class","no_result"),n.innerHTML=`<span>Found No Results for "${e.query}"</span>`,t.prepend(n)}},noResults:!0},resultItem:{highlight:!0},events:{input:{selection:t=>{const e=t.detail.selection.value;this.autocomplete.input.value=e}}}})}_getSystemRegionSource(){return{src:async t=>{try{const e=new FormData;e.append("query",t);const n=await fetch(this.options.proximitySearch.sourceUrl+"/region/query",{method:"POST",body:e}),r=await n.json();return console.log(r.results),r.results}catch(t){return t}},keys:["region"]}}}},36:(t,e,n)=>{const{LeadMatching:r}=n(747);t.exports=r}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r=n(36);LeadMatching=r})();